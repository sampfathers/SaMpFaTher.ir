<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grand Community - کامیونتی سمپ ایران</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        :root {
            --primary-color: #FFFFFF;
            --secondary-color: #D4AF37;
            --accent-color: #FFD700;
            --dark-bg: #F8F9FA;
            --light-bg: #FFFFFF;
            --text-color: #333333;
            --text-secondary: #666666;
            --border-color: #E0E0E0;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --info-color: #17a2b8;
            --warning-color: #ffc107;
            --border-radius: 8px;
            --box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: var(--primary-color);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(212, 175, 55, 0.05) 0%, transparent 30%),
                radial-gradient(circle at 90% 80%, rgba(212, 175, 55, 0.05) 0%, transparent 30%),
                radial-gradient(circle at 50% 50%, rgba(255, 215, 0, 0.03) 0%, transparent 50%);
            z-index: -1;
        }

        /* Header Styles - بسیار کوچک‌تر شده */
        header {
            background-color: var(--light-bg);
            padding: 0.4rem 1.2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.08);
            border-bottom: 2px solid var(--secondary-color);
            transition: var(--transition);
            backdrop-filter: blur(10px);
            background-color: rgba(255, 255, 255, 0.95);
        }

        header.hidden {
            transform: translateY(-100%);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .logo-icon {
            color: var(--secondary-color);
            font-size: 1.4rem;
            animation: pulse-gold 2s infinite;
        }

        @keyframes pulse-gold {
            0% { transform: scale(1); text-shadow: 0 0 0 rgba(212, 175, 55, 0); }
            50% { transform: scale(1.1); text-shadow: 0 0 10px rgba(212, 175, 55, 0.5); }
            100% { transform: scale(1); text-shadow: 0 0 0 rgba(212, 175, 55, 0); }
        }

        .logo-text {
            font-size: 1.1rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--secondary-color), var(--accent-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .logo-subtitle {
            font-size: 0.6rem;
            color: var(--text-secondary);
            margin-top: -2px;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 0.8rem;
        }

        nav a {
            color: var(--text-color);
            text-decoration: none;
            font-weight: 500;
            padding: 0.3rem 0.7rem;
            border-radius: 20px;
            transition: var(--transition);
            position: relative;
            font-size: 0.8rem;
        }

        nav a:hover {
            color: var(--secondary-color);
            background-color: rgba(212, 175, 55, 0.08);
            transform: translateY(-2px);
        }

        nav a.active {
            color: var(--secondary-color);
            background-color: rgba(212, 175, 55, 0.12);
            box-shadow: 0 2px 8px rgba(212, 175, 55, 0.2);
        }

        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: linear-gradient(to right, var(--secondary-color), var(--accent-color));
            transition: var(--transition);
            transform: translateX(-50%);
        }

        nav a:hover::after,
        nav a.active::after {
            width: 60%;
        }

        .user-actions {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .auth-buttons {
            display: flex;
            gap: 0.4rem;
        }

        .btn {
            padding: 0.4rem 1rem;
            border-radius: 20px;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.8rem;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-login {
            background-color: transparent;
            color: var(--secondary-color);
            border: 1px solid var(--secondary-color);
        }

        .btn-login:hover {
            background-color: rgba(212, 175, 55, 0.08);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.2);
        }

        .btn-register {
            background: linear-gradient(to right, var(--secondary-color), var(--accent-color));
            color: white;
        }

        .btn-register:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(212, 175, 55, 0.3);
        }

        .user-profile {
            position: relative;
            cursor: pointer;
        }

        .profile-img {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid var(--secondary-color);
            object-fit: cover;
            transition: var(--transition);
        }

        .user-profile:hover .profile-img {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
        }

        .profile-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            background-color: var(--light-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            width: 220px;
            padding: 0.8rem;
            margin-top: 0.5rem;
            display: none;
            z-index: 100;
            border: 1px solid var(--border-color);
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-profile:hover .profile-dropdown {
            display: block;
        }

        .profile-info {
            display: flex;
            align-items: center;
            gap: 0.7rem;
            padding-bottom: 0.8rem;
            border-bottom: 1px solid var(--border-color);
        }

        .profile-name {
            font-weight: 500;
            font-size: 0.9rem;
        }

        .profile-role {
            font-size: 0.7rem;
            color: var(--secondary-color);
            background-color: rgba(212, 175, 55, 0.1);
            padding: 0.1rem 0.4rem;
            border-radius: 10px;
        }

        .profile-menu {
            list-style: none;
            margin-top: 0.8rem;
        }

        .profile-menu li {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.03);
        }

        .profile-menu a {
            color: var(--text-color);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.6rem;
            transition: var(--transition);
            font-size: 0.8rem;
            padding: 0.3rem;
            border-radius: 5px;
        }

        .profile-menu a:hover {
            color: var(--secondary-color);
            background-color: rgba(212, 175, 55, 0.05);
            padding-right: 10px;
        }

        .profile-menu i {
            width: 18px;
            text-align: center;
            color: var(--secondary-color);
        }

        /* Main Content */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1.2rem;
        }

        .hero {
            text-align: center;
            padding: 2.5rem 1rem;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.08) 0%, rgba(255, 255, 255, 0.5) 100%);
            border-radius: var(--border-radius);
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
            animation: fadeInUp 1s ease;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.05) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
            z-index: -1;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hero h1 {
            font-size: 2.3rem;
            margin-bottom: 1rem;
            background: linear-gradient(to right, var(--secondary-color), var(--accent-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 10px rgba(212, 175, 55, 0.2);
        }

        .hero p {
            font-size: 1rem;
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto 1.5rem;
        }

        /* Social Channels */
        .social-channels {
            display: flex;
            justify-content: center;
            gap: 1.2rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .channel-card {
            background-color: var(--light-bg);
            border-radius: var(--border-radius);
            padding: 1.2rem;
            width: 150px;
            text-align: center;
            border: 1px solid var(--border-color);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            animation: fadeIn 0.8s ease;
        }

        .channel-card:nth-child(1) { animation-delay: 0.1s; }
        .channel-card:nth-child(2) { animation-delay: 0.2s; }
        .channel-card:nth-child(3) { animation-delay: 0.3s; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .channel-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(to left, var(--secondary-color), var(--accent-color));
        }

        .channel-card:hover {
            transform: translateY(-8px) scale(1.03);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .channel-icon {
            font-size: 2rem;
            margin-bottom: 0.8rem;
            color: var(--secondary-color);
            transition: var(--transition);
        }

        .channel-card:hover .channel-icon {
            transform: rotateY(360deg);
            color: var(--accent-color);
        }

        .channel-name {
            font-weight: 500;
            margin-bottom: 0.3rem;
            font-size: 0.9rem;
        }

        .channel-link {
            color: var(--secondary-color);
            text-decoration: none;
            font-size: 0.8rem;
            display: inline-block;
            margin-top: 0.3rem;
            transition: var(--transition);
            position: relative;
        }

        .channel-link::after {
            content: '';
            position: absolute;
            bottom: -2px;
            right: 0;
            width: 0;
            height: 1px;
            background-color: var(--accent-color);
            transition: var(--transition);
        }

        .channel-link:hover {
            color: var(--accent-color);
        }

        .channel-link:hover::after {
            width: 100%;
        }

        /* Sections */
        .section-title {
            font-size: 1.6rem;
            margin-bottom: 1.2rem;
            padding-bottom: 0.7rem;
            border-bottom: 2px solid var(--secondary-color);
            position: relative;
            display: inline-block;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -2px;
            right: 0;
            width: 40px;
            height: 2px;
            background-color: var(--accent-color);
            animation: widthGrow 2s infinite alternate;
        }

        @keyframes widthGrow {
            from { width: 40px; }
            to { width: 100px; }
        }

        /* Servers */
        .servers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(270px, 1fr));
            gap: 1.2rem;
            margin-bottom: 2rem;
        }

        .server-card {
            background-color: var(--light-bg);
            border-radius: var(--border-radius);
            padding: 1.2rem;
            border: 1px solid var(--border-color);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .server-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, transparent 100%);
            z-index: 0;
        }

        .server-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        /* افکت ویژه برای سرورهای ویژه - پول ریزی طلایی */
        .server-card.featured {
            position: relative;
            overflow: hidden;
            border: 2px solid var(--secondary-color);
            background: linear-gradient(135deg, #fff9e6 0%, #fff 100%);
            box-shadow: 0 5px 20px rgba(212, 175, 55, 0.2);
        }

        .server-card.featured::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(255, 215, 0, 0.2) 0%, transparent 10%),
                radial-gradient(circle at 80% 70%, rgba(255, 215, 0, 0.2) 0%, transparent 10%),
                radial-gradient(circle at 40% 50%, rgba(255, 215, 0, 0.2) 0%, transparent 10%),
                radial-gradient(circle at 60% 20%, rgba(255, 215, 0, 0.2) 0%, transparent 10%),
                radial-gradient(circle at 30% 80%, rgba(255, 215, 0, 0.2) 0%, transparent 10%);
            animation: coinFall 10s linear infinite;
            z-index: 0;
        }

        @keyframes coinFall {
            0% { transform: translateY(-100%) rotate(0deg); }
            100% { transform: translateY(100%) rotate(360deg); }
        }

        .server-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.8rem;
            position: relative;
            z-index: 1;
        }

        .server-name {
            font-size: 1.1rem;
            font-weight: 500;
        }

        .server-type {
            background: linear-gradient(to right, var(--secondary-color), var(--accent-color));
            color: white;
            padding: 0.2rem 0.6rem;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: 500;
            box-shadow: 0 2px 5px rgba(212, 175, 55, 0.3);
        }

        .server-ip {
            background-color: var(--dark-bg);
            padding: 0.6rem;
            border-radius: var(--border-radius);
            font-family: monospace;
            margin: 0.8rem 0;
            text-align: center;
            border: 1px solid var(--border-color);
            font-size: 0.85rem;
            position: relative;
            z-index: 1;
            transition: var(--transition);
        }

        .server-card:hover .server-ip {
            background-color: rgba(212, 175, 55, 0.05);
            border-color: var(--secondary-color);
        }

        .server-info {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 0.8rem;
            position: relative;
            z-index: 1;
        }

        .server-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.8rem;
            font-size: 0.85rem;
            position: relative;
            z-index: 1;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--success-color);
            position: relative;
        }

        .status-dot::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background-color: var(--success-color);
            animation: pulseDot 2s infinite;
        }

        @keyframes pulseDot {
            0% { transform: scale(1); opacity: 0.8; }
            70% { transform: scale(2); opacity: 0; }
            100% { transform: scale(2); opacity: 0; }
        }

        .status-dot.offline {
            background-color: var(--danger-color);
        }

        .status-dot.offline::after {
            background-color: var(--danger-color);
        }

        /* Best Servers Section */
        .best-servers {
            margin-top: 2.5rem;
        }

        .best-servers-toggle {
            display: inline-block;
            background: linear-gradient(to right, var(--secondary-color), var(--accent-color));
            color: white;
            padding: 0.7rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 1.2rem;
            transition: var(--transition);
            border: none;
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
        }

        .best-servers-toggle::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .best-servers-toggle:hover::after {
            width: 300px;
            height: 300px;
        }

        .best-servers-toggle:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 20px rgba(212, 175, 55, 0.3);
        }

        .best-servers-section {
            display: none;
        }

        .best-servers-section.active {
            display: block;
            animation: fadeInUp 0.5s ease;
        }

        /* Server Badge */
        .server-badge {
            position: absolute;
            top: -8px;
            left: -8px;
            background: linear-gradient(to right, var(--secondary-color), var(--accent-color));
            color: white;
            padding: 0.2rem 0.6rem;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: 500;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
            z-index: 2;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        /* Forms */
        .add-server-form {
            background-color: var(--light-bg);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-top: 2rem;
            border: 1px solid var(--border-color);
            animation: fadeIn 0.8s ease;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.4rem;
            font-weight: 500;
            font-size: 0.85rem;
        }

        .form-control {
            width: 100%;
            padding: 0.7rem 0.9rem;
            background-color: var(--light-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            color: var(--text-color);
            transition: var(--transition);
            font-size: 0.9rem;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
            transform: translateY(-2px);
        }

        .radio-group {
            display: flex;
            gap: 1.2rem;
            margin-top: 0.4rem;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            font-size: 0.85rem;
        }

        .radio-option input {
            accent-color: var(--secondary-color);
        }

        .btn-submit {
            background: linear-gradient(to right, var(--secondary-color), var(--accent-color));
            color: white;
            padding: 0.8rem 1.8rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            font-size: 0.9rem;
            width: 100%;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .btn-submit:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(212, 175, 55, 0.3);
        }

        .btn-submit::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn-submit:hover::after {
            width: 300px;
            height: 300px;
        }

        /* Overlay and Payment Modal */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .payment-modal {
            background-color: var(--light-bg);
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 450px;
            padding: 1.5rem;
            border: 2px solid var(--secondary-color);
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlideIn 0.4s ease;
        }

        @keyframes modalSlideIn {
            from { opacity: 0; transform: translateY(-50px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .close-modal {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-modal:hover {
            color: var(--secondary-color);
            background-color: rgba(212, 175, 55, 0.1);
            transform: rotate(90deg);
        }

        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .multi-spinner {
            width: 50px;
            height: 50px;
            position: relative;
            margin-bottom: 1.5rem;
        }

        .multi-spinner div {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 4px solid transparent;
            border-top-color: var(--secondary-color);
            border-radius: 50%;
            animation: spinner 1.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;
        }

        .multi-spinner div:nth-child(2) {
            border-top-color: var(--accent-color);
            animation-delay: 0.1s;
        }

        .multi-spinner div:nth-child(3) {
            border-top-color: #FFD700;
            animation-delay: 0.2s;
        }

        @keyframes spinner {
            to { transform: rotate(360deg); }
        }

        .payment-info {
            background-color: var(--dark-bg);
            padding: 1.2rem;
            border-radius: var(--border-radius);
            margin: 1.2rem 0;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .payment-info::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(to left, var(--secondary-color), var(--accent-color));
        }

        .card-number {
            font-family: monospace;
            font-size: 1.1rem;
            text-align: center;
            margin: 0.8rem 0;
            background-color: white;
            padding: 0.7rem;
            border-radius: var(--border-radius);
            direction: ltr;
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .card-number:hover {
            background-color: rgba(212, 175, 55, 0.05);
            border-color: var(--secondary-color);
            transform: translateY(-2px);
        }

        .card-owner {
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        .upload-receipt {
            margin-top: 1.5rem;
        }

        /* Admin Panel */
        .admin-panel {
            background-color: var(--light-bg);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-top: 2rem;
            border: 2px solid var(--secondary-color);
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .admin-panel.active {
            display: block;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .admin-menu {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .admin-menu-item {
            background-color: var(--dark-bg);
            border-radius: var(--border-radius);
            padding: 1.2rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .admin-menu-item:hover {
            transform: translateY(-5px) scale(1.03);
            border-color: var(--secondary-color);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .admin-menu-item::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(to left, var(--secondary-color), var(--accent-color));
        }

        .admin-menu-icon {
            font-size: 1.8rem;
            color: var(--secondary-color);
            margin-bottom: 0.8rem;
            transition: var(--transition);
        }

        .admin-menu-item:hover .admin-menu-icon {
            transform: scale(1.2) rotate(10deg);
            color: var(--accent-color);
        }

        .admin-section {
            display: none;
        }

        .admin-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        /* Tickets and Orders */
        .ticket-list, .order-list {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .ticket-item, .order-item {
            background-color: var(--dark-bg);
            border-radius: var(--border-radius);
            padding: 1.2rem;
            border: 1px solid var(--border-color);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .ticket-item:hover, .order-item:hover {
            border-color: var(--secondary-color);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .ticket-header, .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.8rem;
        }

        .ticket-status, .order-status {
            padding: 0.2rem 0.6rem;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: 500;
        }

        .status-pending {
            background-color: rgba(255, 193, 7, 0.15);
            color: #d39e00;
            animation: pulseStatus 2s infinite;
        }

        @keyframes pulseStatus {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .status-approved {
            background-color: rgba(40, 167, 69, 0.15);
            color: #28a745;
        }

        .status-rejected {
            background-color: rgba(220, 53, 69, 0.15);
            color: #dc3545;
        }

        /* Buttons */
        .btn-small {
            padding: 0.25rem 0.8rem;
            font-size: 0.7rem;
            border-radius: 15px;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .btn-small:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
        }

        .btn-approve {
            background: linear-gradient(to right, #28a745, #20c997);
            color: white;
        }

        .btn-reject {
            background: linear-gradient(to right, #dc3545, #e83e8c);
            color: white;
        }

        .btn-chat {
            background: linear-gradient(to right, var(--secondary-color), var(--accent-color));
            color: white;
        }

        .btn-info {
            background: linear-gradient(to right, #17a2b8, #20c997);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(to right, #ffc107, #fd7e14);
            color: #333;
        }

        /* Rules Section */
        .rules-section {
            background-color: var(--light-bg);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-top: 2rem;
            border: 1px solid var(--border-color);
            animation: fadeIn 0.8s ease;
        }

        .rules-list {
            list-style: none;
            margin-top: 1.2rem;
        }

        .rules-list li {
            padding: 0.7rem 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .rules-list li:hover {
            padding-right: 10px;
            background-color: rgba(212, 175, 55, 0.03);
        }

        .rules-list li:last-child {
            border-bottom: none;
        }

        .rules-list i {
            color: var(--secondary-color);
        }

        .article-meta {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            margin-top: 1.2rem;
            padding-top: 1.2rem;
            border-top: 1px solid var(--border-color);
        }

        .article-author-img {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            object-fit: cover;
            border: 1px solid var(--secondary-color);
            transition: var(--transition);
        }

        .article-author-img:hover {
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }

        /* Footer */
        footer {
            background-color: var(--dark-bg);
            padding: 1.5rem;
            margin-top: 2.5rem;
            border-top: 2px solid var(--secondary-color);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .footer-logo {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--secondary-color);
            margin-bottom: 0.8rem;
            display: inline-block;
            transition: var(--transition);
        }

        .footer-logo:hover {
            transform: translateY(-3px);
            text-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }

        .copyright {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-top: 0.8rem;
        }

        /* New Features */
        .server-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            background-color: var(--dark-bg);
            padding: 1rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            animation: fadeInUp 0.8s ease;
        }

        .stat-box {
            text-align: center;
            flex: 1;
            position: relative;
            padding: 0.5rem;
            transition: var(--transition);
        }

        .stat-box:hover {
            transform: translateY(-5px);
        }

        .stat-box::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 50%;
            transform: translateX(50%);
            width: 0;
            height: 3px;
            background: linear-gradient(to right, var(--secondary-color), var(--accent-color));
            transition: var(--transition);
        }

        .stat-box:hover::after {
            width: 50%;
        }

        .stat-number {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--secondary-color);
            margin-bottom: 0.3rem;
            text-shadow: 0 2px 5px rgba(212, 175, 55, 0.2);
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .search-box {
            margin-bottom: 1.5rem;
            position: relative;
            animation: fadeInUp 0.8s ease 0.2s both;
        }

        .search-input {
            width: 100%;
            padding: 0.8rem 1rem 0.8rem 2.5rem;
            border: 1px solid var(--border-color);
            border-radius: 25px;
            background-color: var(--light-bg);
            color: var(--text-color);
            transition: var(--transition);
            font-size: 0.9rem;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
            padding-right: 3rem;
        }

        .search-icon {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            transition: var(--transition);
        }

        .search-input:focus + .search-icon {
            color: var(--secondary-color);
            transform: translateY(-50%) scale(1.2);
        }

        .server-rating {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            margin-top: 0.5rem;
            font-size: 0.85rem;
        }

        .star {
            color: #FFD700;
            text-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
            transition: var(--transition);
        }

        .star:hover {
            transform: scale(1.3) rotate(15deg);
        }

        .star.empty {
            color: var(--border-color);
        }

        /* Admin Delete Button */
        .server-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        /* Floating Elements */
        .floating-element {
            position: absolute;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.2) 0%, transparent 70%);
            border-radius: 50%;
            z-index: -1;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .header-container {
                flex-direction: column;
                gap: 0.8rem;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .hero h1 {
                font-size: 1.8rem;
            }
            
            .servers-grid {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            }
            
            .admin-menu {
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            }
            
            .server-stats {
                flex-wrap: wrap;
            }
            
            .stat-box {
                flex: 1 0 45%;
                margin-bottom: 0.5rem;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .hero {
                padding: 1.5rem 1rem;
            }
            
            .hero h1 {
                font-size: 1.6rem;
            }
            
            .social-channels {
                gap: 0.8rem;
            }
            
            .channel-card {
                width: 130px;
                padding: 1rem;
            }
            
            .admin-menu {
                grid-template-columns: 1fr;
            }
            
            .server-stats {
                flex-direction: column;
                gap: 0.8rem;
            }
            
            .stat-box {
                flex: 1 0 100%;
            }
        }

        /* Scroll animations */
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Floating Coins Animation for Featured Servers */
        .coin {
            position: absolute;
            width: 15px;
            height: 15px;
            background: radial-gradient(circle at 30% 30%, #FFD700, #D4AF37);
            border-radius: 50%;
            z-index: 0;
            opacity: 0;
            box-shadow: 0 0 10px #FFD700;
            animation: floatCoin 5s linear infinite;
        }

        @keyframes floatCoin {
            0% {
                opacity: 0;
                transform: translateY(0) rotate(0deg);
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) rotate(360deg);
            }
        }

        /* Profile Picture Upload Styles */
        .profile-pic-upload {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1rem;
        }

        .profile-pic-preview {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 3px solid var(--secondary-color);
            object-fit: cover;
            margin: 0 auto;
            display: block;
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
            transition: var(--transition);
        }

        .profile-pic-preview:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.4);
        }

        .upload-sites {
            background-color: var(--dark-bg);
            padding: 1rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            margin-top: 0.5rem;
        }

        .upload-sites h4 {
            margin-bottom: 0.8rem;
            color: var(--secondary-color);
            font-size: 0.9rem;
        }

        .upload-sites-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .upload-site-link {
            color: var(--secondary-color);
            text-decoration: none;
            font-size: 0.85rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .upload-site-link:hover {
            color: var(--accent-color);
            padding-right: 5px;
        }

        .upload-site-link i {
            font-size: 0.8rem;
        }

        /* Particle animation for background */
        .particle {
            position: fixed;
            border-radius: 50%;
            z-index: -1;
            pointer-events: none;
        }

        .particle-1 {
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.1) 0%, transparent 70%);
            top: 10%;
            right: 10%;
            animation: float 20s infinite linear;
        }

        .particle-2 {
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.05) 0%, transparent 70%);
            bottom: 20%;
            left: 10%;
            animation: float 25s infinite linear reverse;
        }

        .particle-3 {
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.08) 0%, transparent 70%);
            top: 50%;
            right: 20%;
            animation: float 30s infinite linear;
        }

        @keyframes float {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }
            33% {
                transform: translate(30px, 50px) rotate(120deg);
            }
            66% {
                transform: translate(-20px, 80px) rotate(240deg);
            }
            100% {
                transform: translate(0, 0) rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <!-- Particle Background Elements -->
    <div class="particle particle-1"></div>
    <div class="particle particle-2"></div>
    <div class="particle particle-3"></div>

    <!-- Header -->
    <header id="main-header">
        <div class="header-container">
            <div class="logo">
                <div class="logo-icon"><i class="fas fa-crown"></i></div>
                <div>
                    <div class="logo-text">Grand Community</div>
                    <div class="logo-subtitle">کامیونتی سمپ ایران</div>
                </div>
            </div>
            
            <nav>
                <ul>
                    <li><a href="#" class="active" data-section="home">خانه</a></li>
                    <li><a href="#" data-section="community-servers">سرورهای تحت نظر</a></li>
                    <li><a href="#" data-section="best-servers">بهترین سرورها</a></li>
                    <li><a href="#" data-section="rules">قوانین</a></li>
                    <li><a href="#" id="admin-link" style="display: none;">پنل مدیریت</a></li>
                </ul>
            </nav>
            
            <div class="user-actions">
                <div class="auth-buttons" id="auth-buttons">
                    <button class="btn btn-login" id="login-btn">ورود</button>
                    <button class="btn btn-register" id="register-btn">ثبت‌نام</button>
                </div>
                
                <div class="user-profile" id="user-profile" style="display: none;">
                    <img src="https://via.placeholder.com/32/FFFFFF/D4AF37?text=U" alt="پروفایل" class="profile-img" id="profile-img">
                    <div class="profile-dropdown">
                        <div class="profile-info">
                            <img src="https://via.placeholder.com/32/FFFFFF/D4AF37?text=U" alt="پروفایل" class="profile-img" id="dropdown-profile-img">
                            <div>
                                <div class="profile-name" id="dropdown-profile-name">کاربر</div>
                                <div class="profile-role" id="dropdown-profile-role">کاربر عادی</div>
                            </div>
                        </div>
                        <ul class="profile-menu">
                            <li><a href="#" id="profile-settings"><i class="fas fa-user-cog"></i> تنظیمات حساب</a></li>
                            <li><a href="#" id="my-servers"><i class="fas fa-server"></i> سرورهای من</a></li>
                            <li><a href="#" id="my-orders"><i class="fas fa-shopping-cart"></i> سفارشات من</a></li>
                            <li><a href="#" id="logout-btn"><i class="fas fa-sign-out-alt"></i> خروج</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Home Section -->
        <section id="home-section" class="section">
            <div class="hero">
                <h1>به Grand Community خوش آمدید</h1>
                <p>بزرگترین جامعه بازیکنان سمپ در ایران. اینجا می‌توانید بهترین سرورهای سمپ را پیدا کنید، سرور خود را اضافه کنید و با جامعه بزرگ سمپ ایران در ارتباط باشید.</p>
                
                <div class="social-channels">
                    <div class="channel-card">
                        <div class="channel-icon"><i class="fab fa-telegram"></i></div>
                        <div class="channel-name">تلگرام</div>
                        <p>کانال تلگرامی ما</p>
                        <a href="#" class="channel-link">عضویت در کانال</a>
                    </div>
                    
                    <div class="channel-card">
                        <div class="channel-icon"><i class="fas fa-bullhorn"></i></div>
                        <div class="channel-name">روبیکا</div>
                        <p>کانال اصلی ما</p>
                        <a href="https://rubika.ir/Grand_Community" class="channel-link" target="_blank">@Grand_Community</a>
                    </div>
                    
                    <div class="channel-card">
                        <div class="channel-icon"><i class="fas fa-comment-dots"></i></div>
                        <div class="channel-name">سروش</div>
                        <p>کانال سروش ما</p>
                        <a href="#" class="channel-link">عضویت در کانال</a>
                    </div>
                </div>
            </div>
            
            <!-- Server Statistics -->
            <div class="server-stats">
                <div class="stat-box">
                    <div class="stat-number" id="total-servers">0</div>
                    <div class="stat-label">سرور فعال</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number" id="online-servers">0</div>
                    <div class="stat-label">آنلاین</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number" id="featured-servers">0</div>
                    <div class="stat-label">سرور ویژه</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number" id="total-players">0</div>
                    <div class="stat-label">بازیکن آنلاین</div>
                </div>
            </div>
            
            <!-- Search Box -->
            <div class="search-box">
                <input type="text" class="search-input" id="server-search" placeholder="جستجوی سرور...">
                <div class="search-icon"><i class="fas fa-search"></i></div>
            </div>
            
            <!-- Community Servers Section -->
            <section id="community-servers-section">
                <h2 class="section-title">سرورهای تحت نظر کامیونتی</h2>
                <div class="servers-grid" id="community-servers-list">
                    <!-- Dynamic content from JS -->
                </div>
            </section>
            
            <!-- Best Servers Section -->
            <section class="best-servers">
                <button class="best-servers-toggle" id="best-servers-toggle">
                    مشاهده بهترین سرورهای سمپ <i class="fas fa-arrow-down"></i>
                </button>
                
                <div class="best-servers-section" id="best-servers-section">
                    <h2 class="section-title">بهترین سرورهای سمپ</h2>
                    <div class="servers-grid" id="best-servers-list">
                        <!-- Dynamic content from JS -->
                    </div>
                    
                    <!-- Add Server Form -->
                    <div class="add-server-form">
                        <h3>ثبت سرور جدید</h3>
                        <form id="server-form">
                            <div class="form-group">
                                <label for="server-name">اسم سرور</label>
                                <input type="text" id="server-name" class="form-control" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="server-ip">آیپی و پورت سرور</label>
                                <input type="text" id="server-ip" class="form-control" placeholder="مثال: 127.0.0.1:7777" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="server-type">نوع سرور</label>
                                <select id="server-type" class="form-control" required>
                                    <option value="">انتخاب کنید</option>
                                    <option value="RP">RP (نقش آفرینی)</option>
                                    <option value="RPG">RPG (نقش آفرینی پیشرفته)</option>
                                    <option value="CNR">CNR (Cops and Robbers)</option>
                                    <option value="FREEROAM">FREEROAM (آزاد)</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>به چه نوعی ثبت شود</label>
                                <div class="radio-group">
                                    <div class="radio-option">
                                        <input type="radio" id="normal-type" name="registration-type" value="normal" checked>
                                        <label for="normal-type">عادی (49,000 تومان)</label>
                                    </div>
                                    <div class="radio-option">
                                        <input type="radio" id="vip-type" name="registration-type" value="vip">
                                        <label for="vip-type">ویژه (99,000 تومان)</label>
                                    </div>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn-submit" id="submit-server-btn">ثبت و پرداخت</button>
                        </form>
                    </div>
                </div>
            </section>
        </section>
        
        <!-- Admin Panel -->
        <section class="admin-panel" id="admin-panel">
            <div class="admin-header">
                <h2>پنل مدیریت Grand Community</h2>
                <button class="btn btn-login" id="close-admin-panel">بستن پنل</button>
            </div>
            
            <div class="admin-menu">
                <div class="admin-menu-item" data-admin-section="add-server">
                    <div class="admin-menu-icon"><i class="fas fa-plus-circle"></i></div>
                    <h3>افزودن دستی سرور</h3>
                    <p>افزودن سرور جدید به صورت دستی</p>
                </div>
                
                <div class="admin-menu-item" data-admin-section="manage-orders">
                    <div class="admin-menu-icon"><i class="fas fa-shopping-cart"></i></div>
                    <h3>مدیریت سفارشات</h3>
                    <p>مدیریت و مشاهده سفارشات ثبت شده</p>
                </div>
                
                <div class="admin-menu-item" data-admin-section="manage-tickets">
                    <div class="admin-menu-icon"><i class="fas fa-ticket-alt"></i></div>
                    <h3>مدیریت تیکت‌ها</h3>
                    <p>مدیریت تیکت‌های کاربران</p>
                </div>
                
                <div class="admin-menu-item" data-admin-section="manage-ads">
                    <div class="admin-menu-icon"><i class="fas fa-ad"></i></div>
                    <h3>تبلیغات در سایت</h3>
                    <p>مدیریت تبلیغات نمایشی در سایت</p>
                </div>
                
                <div class="admin-menu-item" data-admin-section="manage-community">
                    <div class="admin-menu-icon"><i class="fas fa-users"></i></div>
                    <h3>مدیریت سرورهای تحت نظر</h3>
                    <p>مدیریت سرورهای تحت نظر کامیونتی</p>
                </div>
                
                <div class="admin-menu-item" data-admin-section="manage-best-servers">
                    <div class="admin-menu-icon"><i class="fas fa-star"></i></div>
                    <h3>مدیریت بهترین سرورها</h3>
                    <p>مدیریت بخش بهترین سرورهای سمپ</p>
                </div>
                
                <div class="admin-menu-item" data-admin-section="manage-articles">
                    <div class="admin-menu-icon"><i class="fas fa-newspaper"></i></div>
                    <h3>مدیریت مطالب</h3>
                    <p>مدیریت مطالب و قوانین سایت</p>
                </div>
                
                <div class="admin-menu-item" data-admin-section="site-stats">
                    <div class="admin-menu-icon"><i class="fas fa-chart-bar"></i></div>
                    <h3>آمار سایت</h3>
                    <p>مشاهده آمار و گزارشات سایت</p>
                </div>
            </div>
            
            <!-- Admin Sections -->
            <div id="admin-sections">
                <!-- Add Server Manually -->
                <div class="admin-section" id="add-server-section">
                    <h3>افزودن سرور دستی</h3>
                    <form id="admin-server-form">
                        <div class="form-group">
                            <label for="admin-server-name">اسم سرور</label>
                            <input type="text" id="admin-server-name" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="admin-server-ip">آیپی سرور (اختیاری)</label>
                            <input type="text" id="admin-server-ip" class="form-control" placeholder="برای سرورهای تحت نظر آیپی لازم نیست">
                        </div>
                        
                        <div class="form-group">
                            <label for="admin-server-type">نوع سرور</label>
                            <select id="admin-server-type" class="form-control" required>
                                <option value="">انتخاب کنید</option>
                                <option value="RP">RP</option>
                                <option value="RPG">RPG</option>
                                <option value="CNR">CNR</option>
                                <option value="FREEROAM">FREEROAM</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="admin-server-section">بخش نمایش</label>
                            <select id="admin-server-section" class="form-control" required>
                                <option value="community">سرورهای تحت نظر</option>
                                <option value="best">بهترین سرورها</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="admin-server-featured">نوع سرور</label>
                            <select id="admin-server-featured" class="form-control">
                                <option value="normal">عادی</option>
                                <option value="featured">ویژه (تیک آبی)</option>
                            </select>
                        </div>
                        
                        <button type="submit" class="btn-submit">افزودن سرور</button>
                    </form>
                </div>
                
                <!-- Manage Tickets -->
                <div class="admin-section" id="manage-tickets-section">
                    <h3>مدیریت تیکت‌ها</h3>
                    <div class="ticket-list" id="ticket-list">
                        <!-- Dynamic content from JS -->
                    </div>
                </div>
                
                <!-- Manage Orders -->
                <div class="admin-section" id="manage-orders-section">
                    <h3>مدیریت سفارشات</h3>
                    <div class="order-list" id="order-list">
                        <!-- Dynamic content from JS -->
                    </div>
                </div>
                
                <!-- Manage Community Servers -->
                <div class="admin-section" id="manage-community-section">
                    <h3>مدیریت سرورهای تحت نظر کامیونتی</h3>
                    <div class="servers-grid" id="admin-community-servers">
                        <!-- Dynamic content from JS -->
                    </div>
                </div>
                
                <!-- Manage Best Servers -->
                <div class="admin-section" id="manage-best-servers-section">
                    <h3>مدیریت بهترین سرورهای سمپ</h3>
                    <div class="servers-grid" id="admin-best-servers">
                        <!-- Dynamic content from JS -->
                    </div>
                </div>
                
                <!-- Manage Articles -->
                <div class="admin-section" id="manage-articles-section">
                    <h3>مدیریت مطالب و قوانین</h3>
                    <form id="article-form">
                        <div class="form-group">
                            <label for="article-title">عنوان مطلب</label>
                            <input type="text" id="article-title" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="article-content">محتوای مطلب</label>
                            <textarea id="article-content" class="form-control" rows="6" required></textarea>
                        </div>
                        
                        <button type="submit" class="btn-submit">انتشار مطلب</button>
                    </form>
                    
                    <div id="articles-list" style="margin-top: 2rem;">
                        <!-- Dynamic content from JS -->
                    </div>
                </div>
                
                <!-- Manage Ads -->
                <div class="admin-section" id="manage-ads-section">
                    <h3>مدیریت تبلیغات</h3>
                    <div class="add-server-form">
                        <form id="ad-form">
                            <div class="form-group">
                                <label for="ad-title">عنوان تبلیغ</label>
                                <input type="text" id="ad-title" class="form-control" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="ad-content">محتوا یا لینک تصویر</label>
                                <textarea id="ad-content" class="form-control" rows="3" required></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="ad-position">موقعیت نمایش</label>
                                <select id="ad-position" class="form-control" required>
                                    <option value="header">بالای هدر</option>
                                    <option value="community">بین سرورهای تحت نظر</option>
                                    <option value="best">بین بهترین سرورها</option>
                                    <option value="footer">فوتر</option>
                                </select>
                            </div>
                            
                            <button type="submit" class="btn-submit">افزودن تبلیغ</button>
                        </form>
                    </div>
                </div>
                
                <!-- Site Stats -->
                <div class="admin-section" id="site-stats-section">
                    <h3>آمار سایت</h3>
                    <div class="server-stats">
                        <div class="stat-box">
                            <div class="stat-number" id="admin-total-users">0</div>
                            <div class="stat-label">کاربران ثبت‌نامی</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number" id="admin-total-servers">0</div>
                            <div class="stat-label">کل سرورها</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number" id="admin-total-orders">0</div>
                            <div class="stat-label">سفارشات</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number" id="admin-total-revenue">0</div>
                            <div class="stat-label">درآمد (تومان)</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 2rem;">
                        <h4>آخرین فعالیت‌ها</h4>
                        <div class="ticket-list" id="recent-activities" style="margin-top: 1rem;">
                            <!-- Dynamic content from JS -->
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Rules Section -->
        <section id="rules-section" class="section" style="display: none;">
            <div class="rules-section">
                <h2 class="section-title">قوانین و مطالب</h2>
                <div id="rules-content">
                    <!-- Dynamic content from JS -->
                </div>
            </div>
        </section>
    </main>

    <!-- Overlay and Modals -->
    <div class="overlay" id="overlay">
        <!-- Login Modal -->
        <div class="payment-modal" id="login-modal" style="display: none;">
            <button class="close-modal" id="close-login-modal">×</button>
            <h2>ورود به حساب کاربری</h2>
            <form id="login-form">
                <div class="form-group">
                    <label for="login-username">نام کاربری</label>
                    <input type="text" id="login-username" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="login-password">رمز عبور</label>
                    <input type="password" id="login-password" class="form-control" required>
                </div>
                
                <button type="submit" class="btn-submit">ورود</button>
            </form>
            
            <p style="text-align: center; margin-top: 1rem; font-size: 0.85rem;">
                حساب کاربری ندارید؟ <a href="#" id="switch-to-register" style="color: var(--secondary-color);">ثبت‌نام کنید</a>
            </p>
        </div>
        
        <!-- Register Modal -->
        <div class="payment-modal" id="register-modal" style="display: none;">
            <button class="close-modal" id="close-register-modal">×</button>
            <h2>ثبت‌نام در سایت</h2>
            <form id="register-form">
                <div class="form-group">
                    <label for="register-username">نام کاربری</label>
                    <input type="text" id="register-username" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="register-email">ایمیل</label>
                    <input type="email" id="register-email" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="register-password">رمز عبور</label>
                    <input type="password" id="register-password" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="register-confirm-password">تکرار رمز عبور</label>
                    <input type="password" id="register-confirm-password" class="form-control" required>
                </div>
                
                <button type="submit" class="btn-submit">ثبت‌نام</button>
            </form>
            
            <p style="text-align: center; margin-top: 1rem; font-size: 0.85rem;">
                حساب کاربری دارید؟ <a href="#" id="switch-to-login" style="color: var(--secondary-color);">وارد شوید</a>
            </p>
        </div>
        
        <!-- Payment Modal -->
        <div class="payment-modal" id="payment-modal" style="display: none;">
            <button class="close-modal" id="close-payment-modal">×</button>
            
            <div class="loading" id="payment-loading">
                <div class="multi-spinner">
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
                <h3>در حال انتقال به درگاه پرداخت امن...</h3>
                <p>لطفا چند لحظه صبر کنید</p>
            </div>
            
            <div id="payment-details" style="display: none;">
                <h2>پرداخت و ثبت سرور</h2>
                
                <div class="payment-info">
                    <p>لطفا مبلغ <strong id="payment-amount">49,000 تومان</strong> را به شماره کارت زیر واریز کنید:</p>
                    <div class="card-number">6221 0612 4568 0667</div>
                    <p class="card-owner">به نام اسماعیل زاده</p>
                    
                    <p style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-secondary);">
                        پس از واریز، لطفا تصویر رسید پرداخت را آپلود کنید.
                    </p>
                </div>
                
                <div class="upload-receipt">
                    <h4>آپلود رسید پرداخت</h4>
                    <div class="upload-area" id="upload-area">
                        <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                        <p>برای آپلود تصویر رسید اینجا کلیک کنید</p>
                        <p style="font-size: 0.8rem; color: var(--text-secondary);">فرمت‌های مجاز: JPG, PNG, GIF (حداکثر 5MB)</p>
                    </div>
                    <input type="file" id="receipt-file" accept="image/*" style="display: none;">
                    <div id="uploaded-file" style="display: none; text-align: center; margin-top: 1rem;">
                        <p><i class="fas fa-check-circle" style="color: var(--success-color);"></i> فایل با موفقیت آپلود شد</p>
                        <p id="file-name" style="font-size: 0.85rem;"></p>
                    </div>
                    
                    <div class="form-group" style="margin-top: 1.5rem;">
                        <label for="receipt-link">لینک آپلود شده (در صورت آپلود در سایت دیگر)</label>
                        <input type="url" id="receipt-link" class="form-control" placeholder="https://example.com/receipt.jpg">
                    </div>
                    
                    <button class="btn-submit" id="confirm-payment-btn" style="margin-top: 1.5rem;">ثبت سفارش و ارسال تیکت</button>
                </div>
            </div>
        </div>
        
        <!-- Profile Settings Modal -->
        <div class="payment-modal" id="profile-modal" style="display: none; max-width: 500px;">
            <button class="close-modal" id="close-profile-modal">×</button>
            <h2>تنظیمات حساب کاربری</h2>
            
            <div class="profile-pic-upload">
                <img src="https://via.placeholder.com/100/FFFFFF/D4AF37?text=U" alt="پروفایل" id="current-profile-img" class="profile-pic-preview">
                
                <div class="form-group">
                    <label for="profile-pic-link">لینک عکس پروفایل</label>
                    <input type="url" id="profile-pic-link" class="form-control" placeholder="https://example.com/your-photo.jpg">
                    <small style="color: var(--text-secondary); font-size: 0.8rem; display: block; margin-top: 0.3rem;">لطفا لینک عکس پروفایل خود را از سایت‌های آپلود عکس وارد کنید</small>
                </div>
                
                <div class="upload-sites">
                    <h4>سایت‌های پیشنهادی برای آپلود عکس</h4>
                    <div class="upload-sites-list">
                        <a href="https://imgur.com" target="_blank" class="upload-site-link"><i class="fas fa-external-link-alt"></i> Imgur</a>
                        <a href="https://postimages.org" target="_blank" class="upload-site-link"><i class="fas fa-external-link-alt"></i> PostImages</a>
                        <a href="https://imgbb.com" target="_blank" class="upload-site-link"><i class="fas fa-external-link-alt"></i> ImgBB</a>
                        <a href="https://upload.ir" target="_blank" class="upload-site-link"><i class="fas fa-external-link-alt"></i> Upload.ir</a>
                    </div>
                </div>
            </div>
            
            <form id="profile-form">
                <div class="form-group">
                    <label for="profile-display-name">نام نمایشی</label>
                    <input type="text" id="profile-display-name" class="form-control">
                </div>
                
                <div class="form-group">
                    <label for="profile-username">نام کاربری</label>
                    <input type="text" id="profile-username" class="form-control" disabled>
                </div>
                
                <div class="form-group">
                    <label for="profile-bio">بیوگرافی</label>
                    <textarea id="profile-bio" class="form-control" rows="3" placeholder="درباره خودتان بنویسید..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="profile-user-id">شناسه کاربری</label>
                    <input type="text" id="profile-user-id" class="form-control">
                </div>
                
                <div style="display: flex; gap: 0.8rem; margin-top: 1.5rem;">
                    <button type="submit" class="btn-submit" style="flex: 1;">ذخیره تغییرات</button>
                    <button type="button" class="btn btn-login" id="cancel-profile-changes" style="flex: 1;">لغو</button>
                </div>
            </form>
            
            <div style="margin-top: 1.5rem; padding-top: 1.2rem; border-top: 1px solid var(--border-color);">
                <h4>آمار حساب</h4>
                <div style="display: flex; justify-content: space-around; text-align: center; margin-top: 1rem;">
                    <div>
                        <div style="font-size: 1.3rem; font-weight: 700; color: var(--secondary-color);" id="followers-count">0</div>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">دنبال‌کننده</div>
                    </div>
                    <div>
                        <div style="font-size: 1.3rem; font-weight: 700; color: var(--secondary-color);" id="likes-count">0</div>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">لایک پروفایل</div>
                    </div>
                    <div>
                        <div style="font-size: 1.3rem; font-weight: 700; color: var(--secondary-color);" id="servers-count">0</div>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">سرورهای ثبت شده</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ticket Chat Modal -->
        <div class="payment-modal" id="ticket-modal" style="display: none; max-width: 650px;">
            <button class="close-modal" id="close-ticket-modal">×</button>
            <h2 id="ticket-title">تیکت پشتیبانی</h2>
            
            <div class="ticket-header" style="margin-bottom: 1.2rem;">
                <div>
                    <span class="ticket-status status-pending" id="ticket-modal-status">در حال بررسی</span>
                </div>
                <div style="color: var(--text-secondary); font-size: 0.85rem;">
                    شماره تیکت: <span id="ticket-modal-id">#0001</span>
                </div>
            </div>
            
            <div id="ticket-chat" style="height: 300px; overflow-y: auto; background-color: var(--dark-bg); border-radius: var(--border-radius); padding: 1rem; margin-bottom: 1.2rem; border: 1px solid var(--border-color);">
                <!-- Chat messages will be loaded here -->
            </div>
            
            <div style="display: flex; gap: 0.5rem;">
                <input type="text" id="ticket-message" class="form-control" placeholder="پیام خود را بنویسید...">
                <button class="btn btn-chat" id="send-ticket-message">ارسال</button>
            </div>
            
            <div style="display: flex; gap: 0.5rem; margin-top: 1rem;" id="ticket-actions">
                <!-- Admin actions will appear here -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-logo">Grand Community</div>
            <p>کامیونتی سمپ ایران - تمامی حقوق محفوظ است © 2023</p>
            
            <div class="social-channels" style="justify-content: center; margin-top: 1.2rem;">
                <a href="#" style="color: var(--text-color); font-size: 1.2rem; margin: 0 0.5rem; transition: var(--transition);">
                    <i class="fab fa-telegram"></i>
                </a>
                <a href="https://rubika.ir/Grand_Community" target="_blank" style="color: var(--text-color); font-size: 1.2rem; margin: 0 0.5rem; transition: var(--transition);">
                    <i class="fas fa-bullhorn"></i>
                </a>
                <a href="#" style="color: var(--text-color); font-size: 1.2rem; margin: 0 0.5rem; transition: var(--transition);">
                    <i class="fas fa-comment-dots"></i>
                </a>
            </div>
            
            <p class="copyright">
                این وبسایت به صورت نمونه و برای نمایش قابلیت‌های Grand Community طراحی شده است.
            </p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Initialize data storage
        const initializeData = () => {
            if (!localStorage.getItem('grandCommunityData')) {
                const initialData = {
                    users: [
                        {
                            id: 1,
                            username: 'MaMad',
                            password: 'polese',
                            email: 'admin@grandcommunity.ir',
                            displayName: 'مدیر کل',
                            bio: 'مدیر اصلی Grand Community',
                            role: 'admin',
                            profilePic: 'https://via.placeholder.com/100/FFFFFF/D4AF37?text=MA',
                            userId: '@MaMad_Admin',
                            followers: 1250,
                            likes: 890,
                            servers: 0,
                            joinDate: '2023-01-01'
                        },
                        {
                            id: 2,
                            username: 'testuser',
                            password: '123456',
                            email: 'user@example.com',
                            displayName: 'کاربر تست',
                            bio: 'یک کاربر عادی در Grand Community',
                            role: 'user',
                            profilePic: 'https://via.placeholder.com/100/FFFFFF/D4AF37?text=TU',
                            userId: '@test_user',
                            followers: 42,
                            likes: 18,
                            servers: 0,
                            joinDate: '2023-05-15'
                        }
                    ],
                    communityServers: [],
                    bestServers: [],
                    orders: [],
                    tickets: [],
                    articles: [
                        {
                            id: 1,
                            title: 'قوانین عمومی استفاده از سرورهای سمپ',
                            content: '1. احترام به همه بازیکنان و مدیران سرور ضروری است.<br>2. هرگونه تقلب و استفاده از هک ممنوع است.<br>3. تبلیغ سرورهای دیگر در سرورهای ما ممنوع است.<br>4. رعایت قوانین هر سرور الزامی است.',
                            authorId: 1,
                            authorName: 'مدیر کل',
                            createdAt: '2023-09-01',
                            views: 1250
                        },
                        {
                            id: 2,
                            title: 'راهنمای ثبت سرور در Grand Community',
                            content: 'برای ثبت سرور خود در Grand Community ابتدا باید در سایت ثبت نام کنید. سپس از بخش "بهترین سرورهای سمپ" فرم ثبت سرور را پر کنید و هزینه مربوطه را پرداخت نمایید. پس از تایید مدیران، سرور شما در لیست نمایش داده می‌شود.',
                            authorId: 1,
                            authorName: 'مدیر کل',
                            createdAt: '2023-09-15',
                            views: 890
                        }
                    ],
                    ads: [],
                    currentUserId: null,
                    nextIds: {
                        users: 3,
                        communityServers: 1,
                        bestServers: 1,
                        orders: 1,
                        tickets: 1,
                        articles: 3,
                        ads: 1
                    }
                };
                
                localStorage.setItem('grandCommunityData', JSON.stringify(initialData));
            }
            
            return JSON.parse(localStorage.getItem('grandCommunityData'));
        };

        // Save data to localStorage
        const saveData = (data) => {
            localStorage.setItem('grandCommunityData', JSON.stringify(data));
        };

        // Get current data
        let data = initializeData();

        // DOM Elements
        const elements = {
            mainHeader: document.getElementById('main-header'),
            authButtons: document.getElementById('auth-buttons'),
            userProfile: document.getElementById('user-profile'),
            profileImg: document.getElementById('profile-img'),
            dropdownProfileImg: document.getElementById('dropdown-profile-img'),
            dropdownProfileName: document.getElementById('dropdown-profile-name'),
            dropdownProfileRole: document.getElementById('dropdown-profile-role'),
            loginBtn: document.getElementById('login-btn'),
            registerBtn: document.getElementById('register-btn'),
            logoutBtn: document.getElementById('logout-btn'),
            adminLink: document.getElementById('admin-link'),
            
            homeSection: document.getElementById('home-section'),
            communityServersSection: document.getElementById('community-servers-section'),
            bestServersSection: document.getElementById('best-servers-section'),
            rulesSection: document.getElementById('rules-section'),
            
            bestServersToggle: document.getElementById('best-servers-toggle'),
            bestServersList: document.getElementById('best-servers-list'),
            communityServersList: document.getElementById('community-servers-list'),
            
            serverForm: document.getElementById('server-form'),
            
            overlay: document.getElementById('overlay'),
            loginModal: document.getElementById('login-modal'),
            registerModal: document.getElementById('register-modal'),
            paymentModal: document.getElementById('payment-modal'),
            profileModal: document.getElementById('profile-modal'),
            ticketModal: document.getElementById('ticket-modal'),
            
            paymentLoading: document.getElementById('payment-loading'),
            paymentDetails: document.getElementById('payment-details'),
            paymentAmount: document.getElementById('payment-amount'),
            uploadArea: document.getElementById('upload-area'),
            receiptFile: document.getElementById('receipt-file'),
            uploadedFile: document.getElementById('uploaded-file'),
            fileName: document.getElementById('file-name'),
            confirmPaymentBtn: document.getElementById('confirm-payment-btn'),
            
            adminPanel: document.getElementById('admin-panel'),
            closeAdminPanel: document.getElementById('close-admin-panel'),
            adminSections: document.getElementById('admin-sections'),
            
            profileForm: document.getElementById('profile-form'),
            currentProfileImg: document.getElementById('current-profile-img'),
            profilePicLink: document.getElementById('profile-pic-link'),
            cancelProfileChanges: document.getElementById('cancel-profile-changes'),
            
            rulesContent: document.getElementById('rules-content'),
            
            totalServers: document.getElementById('total-servers'),
            onlineServers: document.getElementById('online-servers'),
            featuredServers: document.getElementById('featured-servers'),
            totalPlayers: document.getElementById('total-players'),
            
            adminTotalUsers: document.getElementById('admin-total-users'),
            adminTotalServers: document.getElementById('admin-total-servers'),
            adminTotalOrders: document.getElementById('admin-total-orders'),
            adminTotalRevenue: document.getElementById('admin-total-revenue'),
            
            serverSearch: document.getElementById('server-search')
        };

        // State variables
        let currentUser = null;
        let isAdmin = false;
        let currentTicket = null;
        let currentFile = null;
        let allServers = [];

        // Initialize the page
        const init = () => {
            if (data.currentUserId) {
                currentUser = data.users.find(user => user.id === data.currentUserId);
                isAdmin = currentUser.role === 'admin';
                updateUIForLoggedInUser();
            }
            
            loadCommunityServers();
            loadBestServers();
            loadRules();
            updateStats();
            
            setupEventListeners();
            setupScrollAnimations();
            
            // Add coins animation to featured servers
            setupCoinAnimations();
            
            if (isAdmin) {
                elements.adminLink.style.display = 'block';
            }
        };

        // Setup event listeners
        const setupEventListeners = () => {
            // Navigation
            document.querySelectorAll('nav a').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const section = link.getAttribute('data-section');
                    
                    document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
                    link.classList.add('active');
                    
                    if (section === 'home') {
                        showSection(elements.homeSection);
                        hideSection(elements.rulesSection);
                        hideSection(elements.adminPanel);
                        elements.adminPanel.classList.remove('active');
                    } else if (section === 'rules') {
                        showSection(elements.rulesSection);
                        hideSection(elements.homeSection);
                        hideSection(elements.adminPanel);
                        elements.adminPanel.classList.remove('active');
                    } else if (section === 'community-servers') {
                        document.getElementById('community-servers-section').scrollIntoView({ behavior: 'smooth' });
                    } else if (section === 'best-servers') {
                        document.getElementById('best-servers-section').scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });
            
            elements.adminLink.addEventListener('click', (e) => {
                e.preventDefault();
                showAdminPanel();
            });
            
            elements.bestServersToggle.addEventListener('click', () => {
                const section = elements.bestServersSection;
                const isActive = section.classList.contains('active');
                
                if (isActive) {
                    section.classList.remove('active');
                    elements.bestServersToggle.innerHTML = 'مشاهده بهترین سرورهای سمپ <i class="fas fa-arrow-down"></i>';
                    elements.mainHeader.classList.remove('hidden');
                } else {
                    section.classList.add('active');
                    elements.bestServersToggle.innerHTML = 'بستن لیست سرورها <i class="fas fa-arrow-up"></i>';
                    elements.mainHeader.classList.add('hidden');
                }
            });
            
            elements.loginBtn.addEventListener('click', () => showModal('login'));
            elements.registerBtn.addEventListener('click', () => showModal('register'));
            elements.logoutBtn.addEventListener('click', logout);
            
            document.getElementById('close-login-modal').addEventListener('click', () => hideModal('login'));
            document.getElementById('close-register-modal').addEventListener('click', () => hideModal('register'));
            document.getElementById('close-payment-modal').addEventListener('click', () => hideModal('payment'));
            document.getElementById('close-profile-modal').addEventListener('click', () => hideModal('profile'));
            document.getElementById('close-ticket-modal').addEventListener('click', () => hideModal('ticket'));
            
            document.getElementById('switch-to-register').addEventListener('click', (e) => {
                e.preventDefault();
                hideModal('login');
                showModal('register');
            });
            
            document.getElementById('switch-to-login').addEventListener('click', (e) => {
                e.preventDefault();
                hideModal('register');
                showModal('login');
            });
            
            document.getElementById('login-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const username = document.getElementById('login-username').value;
                const password = document.getElementById('login-password').value;
                loginUser(username, password);
            });
            
            document.getElementById('register-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const username = document.getElementById('register-username').value;
                const email = document.getElementById('register-email').value;
                const password = document.getElementById('register-password').value;
                const confirmPassword = document.getElementById('register-confirm-password').value;
                
                if (password !== confirmPassword) {
                    alert('رمز عبور و تکرار آن مطابقت ندارند.');
                    return;
                }
                
                registerUser(username, email, password);
            });
            
            elements.serverForm.addEventListener('submit', (e) => {
                e.preventDefault();
                
                if (!currentUser) {
                    alert('برای ثبت سرور باید وارد حساب کاربری خود شوید.');
                    showModal('login');
                    return;
                }
                
                const serverName = document.getElementById('server-name').value;
                const serverIp = document.getElementById('server-ip').value;
                const serverType = document.getElementById('server-type').value;
                const registrationType = document.querySelector('input[name="registration-type"]:checked').value;
                const amount = registrationType === 'normal' ? 49000 : 99000;
                
                showPaymentModal(serverName, serverIp, serverType, registrationType, amount);
            });
            
            elements.uploadArea.addEventListener('click', () => {
                elements.receiptFile.click();
            });
            
            elements.receiptFile.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    currentFile = e.target.files[0];
                    elements.fileName.textContent = currentFile.name;
                    elements.uploadedFile.style.display = 'block';
                }
            });
            
            elements.confirmPaymentBtn.addEventListener('click', () => {
                const receiptLink = document.getElementById('receipt-link').value;
                
                if (!currentFile && !receiptLink) {
                    alert('لطفا تصویر رسید پرداخت را آپلود کنید یا لینک آن را وارد کنید.');
                    return;
                }
                
                const receiptUrl = currentFile ? `https://upload.grandcommunity.ir/${currentFile.name}` : receiptLink;
                const serverName = elements.paymentModal.getAttribute('data-server-name');
                const serverIp = elements.paymentModal.getAttribute('data-server-ip');
                const serverType = elements.paymentModal.getAttribute('data-server-type');
                const registrationType = elements.paymentModal.getAttribute('data-registration-type');
                const amount = parseInt(elements.paymentModal.getAttribute('data-amount'));
                
                createOrder(serverName, serverIp, serverType, registrationType, amount, receiptUrl);
                hideModal('payment');
                
                elements.serverForm.reset();
                currentFile = null;
                elements.uploadedFile.style.display = 'none';
                document.getElementById('receipt-link').value = '';
            });
            
            document.getElementById('profile-settings').addEventListener('click', (e) => {
                e.preventDefault();
                showProfileModal();
            });
            
            elements.profileForm.addEventListener('submit', (e) => {
                e.preventDefault();
                saveProfileChanges();
            });
            
            elements.cancelProfileChanges.addEventListener('click', () => {
                hideModal('profile');
            });
            
            elements.closeAdminPanel.addEventListener('click', () => {
                hideAdminPanel();
            });
            
            document.querySelectorAll('.admin-menu-item').forEach(item => {
                item.addEventListener('click', () => {
                    const section = item.getAttribute('data-admin-section');
                    showAdminSection(section);
                });
            });
            
            document.getElementById('admin-server-form').addEventListener('submit', (e) => {
                e.preventDefault();
                addServerManually();
            });
            
            document.getElementById('article-form').addEventListener('submit', (e) => {
                e.preventDefault();
                addArticle();
            });
            
            document.getElementById('ad-form').addEventListener('submit', (e) => {
                e.preventDefault();
                addAd();
            });
            
            elements.serverSearch.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                filterServers(searchTerm);
            });
            
            document.getElementById('my-servers').addEventListener('click', (e) => {
                e.preventDefault();
                showMyServers();
            });
            
            document.getElementById('my-orders').addEventListener('click', (e) => {
                e.preventDefault();
                showMyOrders();
            });
            
            // Profile picture link change
            elements.profilePicLink.addEventListener('input', (e) => {
                const newLink = e.target.value;
                if (newLink && isValidUrl(newLink)) {
                    elements.currentProfileImg.src = newLink;
                }
            });
        };

        // Update UI for logged in user
        const updateUIForLoggedInUser = () => {
            if (currentUser) {
                elements.authButtons.style.display = 'none';
                elements.userProfile.style.display = 'block';
                
                const profilePic = currentUser.profilePic || 'https://via.placeholder.com/32/FFFFFF/D4AF37?text=U';
                elements.profileImg.src = profilePic;
                elements.dropdownProfileImg.src = profilePic;
                elements.dropdownProfileName.textContent = currentUser.displayName || currentUser.username;
                elements.dropdownProfileRole.textContent = currentUser.role === 'admin' ? 'مدیر' : 'کاربر عادی';
                
                if (currentUser.role === 'admin') {
                    elements.adminLink.style.display = 'block';
                }
            } else {
                elements.authButtons.style.display = 'flex';
                elements.userProfile.style.display = 'none';
                elements.adminLink.style.display = 'none';
            }
        };

        // Login user
        const loginUser = (username, password) => {
            const user = data.users.find(u => u.username === username && u.password === password);
            
            if (user) {
                currentUser = user;
                isAdmin = user.role === 'admin';
                data.currentUserId = user.id;
                saveData(data);
                
                updateUIForLoggedInUser();
                hideModal('login');
                
                showNotification(`خوش آمدید ${user.displayName || user.username}!`, 'success');
                
                if (isAdmin) {
                    elements.adminLink.style.display = 'block';
                }
            } else {
                alert('نام کاربری یا رمز عبور اشتباه است.');
            }
        };

        // Register user
        const registerUser = (username, email, password) => {
            if (data.users.find(u => u.username === username)) {
                alert('این نام کاربری قبلا ثبت شده است.');
                return;
            }
            
            const newUser = {
                id: data.nextIds.users++,
                username,
                password,
                email,
                displayName: username,
                bio: '',
                role: 'user',
                profilePic: `https://via.placeholder.com/100/FFFFFF/D4AF37?text=${username.charAt(0).toUpperCase()}`,
                userId: `@${username}`,
                followers: 0,
                likes: 0,
                servers: 0,
                joinDate: new Date().toISOString().split('T')[0]
            };
            
            data.users.push(newUser);
            saveData(data);
            
            loginUser(username, password);
        };

        // Logout user
        const logout = () => {
            currentUser = null;
            isAdmin = false;
            data.currentUserId = null;
            saveData(data);
            
            updateUIForLoggedInUser();
            hideAdminPanel();
            
            showNotification('با موفقیت خارج شدید.', 'info');
        };

        // Show payment modal
        const showPaymentModal = (serverName, serverIp, serverType, registrationType, amount) => {
            elements.paymentModal.setAttribute('data-server-name', serverName);
            elements.paymentModal.setAttribute('data-server-ip', serverIp);
            elements.paymentModal.setAttribute('data-server-type', serverType);
            elements.paymentModal.setAttribute('data-registration-type', registrationType);
            elements.paymentModal.setAttribute('data-amount', amount);
            
            elements.paymentAmount.textContent = amount.toLocaleString() + ' تومان';
            
            elements.paymentLoading.style.display = 'block';
            elements.paymentDetails.style.display = 'none';
            
            showModal('payment');
            
            setTimeout(() => {
                elements.paymentLoading.style.display = 'none';
                elements.paymentDetails.style.display = 'block';
            }, 1500);
        };

        // Create order and ticket
        const createOrder = (serverName, serverIp, serverType, registrationType, amount, receiptUrl) => {
            const orderId = data.nextIds.orders++;
            const order = {
                id: orderId,
                userId: currentUser.id,
                serverName,
                serverType,
                serverIp,
                registrationType,
                amount,
                status: 'pending',
                date: new Date().toISOString().split('T')[0],
                receipt: receiptUrl
            };
            
            data.orders.push(order);
            
            const ticketId = data.nextIds.tickets++;
            const ticket = {
                id: ticketId,
                userId: currentUser.id,
                orderId,
                subject: `ثبت سرور ${serverName}`,
                status: 'pending',
                messages: [
                    {
                        id: 1,
                        sender: 'user',
                        message: `سلام، سرور ${serverName} با آیپی ${serverIp} و نوع ${serverType} را ثبت کردم. مبلغ ${amount.toLocaleString()} تومان پرداخت شد. تصویر رسید: ${receiptUrl}`,
                        timestamp: new Date().toISOString().replace('T', ' ').substring(0, 16)
                    }
                ],
                createdAt: new Date().toISOString().split('T')[0]
            };
            
            data.tickets.push(ticket);
            
            const userIndex = data.users.findIndex(u => u.id === currentUser.id);
            if (userIndex !== -1) {
                data.users[userIndex].servers++;
            }
            
            saveData(data);
            updateStats();
            
            showNotification('سفارش شما ثبت شد و تیکت پشتیبانی برای آن ایجاد گردید.', 'success');
            
            if (document.getElementById('manage-tickets-section')?.classList.contains('active')) {
                loadTickets();
            }
        };

        // Show profile modal
        const showProfileModal = () => {
            if (!currentUser) return;
            
            document.getElementById('profile-display-name').value = currentUser.displayName || '';
            document.getElementById('profile-username').value = currentUser.username;
            document.getElementById('profile-bio').value = currentUser.bio || '';
            document.getElementById('profile-user-id').value = currentUser.userId || '';
            elements.profilePicLink.value = currentUser.profilePic || '';
            
            elements.currentProfileImg.src = currentUser.profilePic || 'https://via.placeholder.com/100/FFFFFF/D4AF37?text=U';
            
            document.getElementById('followers-count').textContent = currentUser.followers || 0;
            document.getElementById('likes-count').textContent = currentUser.likes || 0;
            document.getElementById('servers-count').textContent = currentUser.servers || 0;
            
            showModal('profile');
        };

        // Save profile changes
        const saveProfileChanges = () => {
            if (!currentUser) return;
            
            const userIndex = data.users.findIndex(u => u.id === currentUser.id);
            if (userIndex === -1) return;
            
            data.users[userIndex].displayName = document.getElementById('profile-display-name').value;
            data.users[userIndex].bio = document.getElementById('profile-bio').value;
            data.users[userIndex].userId = document.getElementById('profile-user-id').value;
            
            const newProfilePic = elements.profilePicLink.value.trim();
            if (newProfilePic && isValidUrl(newProfilePic)) {
                data.users[userIndex].profilePic = newProfilePic;
            }
            
            saveData(data);
            
            currentUser = data.users[userIndex];
            updateUIForLoggedInUser();
            hideModal('profile');
            
            showNotification('تغییرات پروفایل با موفقیت ذخیره شد.', 'success');
        };

        // URL validation
        const isValidUrl = (url) => {
            try {
                new URL(url);
                return true;
            } catch {
                return false;
            }
        };

        // Load community servers
        const loadCommunityServers = () => {
            const container = elements.communityServersList;
            container.innerHTML = '';
            
            if (data.communityServers.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 2rem; color: var(--text-secondary);">
                        <i class="fas fa-server" style="font-size: 3rem; margin-bottom: 1rem; color: var(--border-color);"></i>
                        <h3>هنوز سروری اضافه نشده است</h3>
                        <p>مدیران می‌توانند از پنل مدیریت سرور اضافه کنند</p>
                    </div>
                `;
                return;
            }
            
            data.communityServers.forEach(server => {
                const serverElement = createServerElement(server, false);
                container.appendChild(serverElement);
            });
            
            updateAllServers();
            addCoinEffects();
        };

        // Load best servers
        const loadBestServers = () => {
            const container = elements.bestServersList;
            container.innerHTML = '';
            
            const approvedServers = data.bestServers.filter(server => server.approved);
            
            if (approvedServers.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 2rem; color: var(--text-secondary);">
                        <i class="fas fa-star" style="font-size: 3rem; margin-bottom: 1rem; color: var(--border-color);"></i>
                        <h3>هنوز سروری ثبت نشده است</h3>
                        <p>اولین نفر باشید که سرور خود را ثبت می‌کند!</p>
                    </div>
                `;
                return;
            }
            
            approvedServers.forEach(server => {
                const serverElement = createServerElement(server, true);
                container.appendChild(serverElement);
            });
            
            updateAllServers();
            addCoinEffects();
        };

        // Create server element
        const createServerElement = (server, isBestServer) => {
            const div = document.createElement('div');
            div.className = `server-card ${server.featured ? 'featured' : ''} fade-in`;
            
            let badge = '';
            if (isBestServer) {
                if (server.registrationType === 'vip' || server.featured) {
                    badge = `<div class="server-badge"><i class="fas fa-check-circle"></i> ویژه</div>`;
                }
            }
            
            const rating = server.rating || Math.floor(Math.random() * 3) + 3;
            const stars = Array(5).fill(0).map((_, i) => 
                i < rating ? '<i class="fas fa-star star"></i>' : '<i class="far fa-star star empty"></i>'
            ).join('');
            
            div.innerHTML = `
                ${badge}
                <div class="server-header">
                    <div class="server-name">${server.name}</div>
                    <div class="server-type">${server.type}</div>
                </div>
                <div class="server-ip">${server.ip}</div>
                <div class="server-info">${server.description}</div>
                <div class="server-rating">
                    ${stars}
                    <span style="margin-right: 0.5rem; color: var(--text-secondary);">(${rating}.0)</span>
                </div>
                <div class="server-status">
                    <div class="status-dot ${server.status === 'online' ? '' : 'offline'}"></div>
                    <span>${server.status === 'online' ? `${server.players}/${server.maxPlayers} بازیکن` : 'آفلاین'}</span>
                </div>
            `;
            
            return div;
        };

        // Add coin effects to featured servers
        const addCoinEffects = () => {
            document.querySelectorAll('.server-card.featured').forEach(card => {
                // Remove existing coins
                const existingCoins = card.querySelectorAll('.coin');
                existingCoins.forEach(coin => coin.remove());
                
                // Add new coins
                for (let i = 0; i < 5; i++) {
                    const coin = document.createElement('div');
                    coin.className = 'coin';
                    coin.style.left = `${Math.random() * 90}%`;
                    coin.style.animationDelay = `${Math.random() * 5}s`;
                    card.appendChild(coin);
                }
            });
        };

        // Setup coin animations
        const setupCoinAnimations = () => {
            // Initial setup
            addCoinEffects();
            
            // Update coins periodically
            setInterval(addCoinEffects, 5000);
        };

        // Update all servers for search
        const updateAllServers = () => {
            allServers = [...data.communityServers, ...data.bestServers.filter(s => s.approved)];
        };

        // Filter servers based on search term
        const filterServers = (searchTerm) => {
            if (!searchTerm) {
                loadCommunityServers();
                if (elements.bestServersSection.classList.contains('active')) {
                    loadBestServers();
                }
                return;
            }
            
            const filteredCommunity = data.communityServers.filter(server => 
                server.name.toLowerCase().includes(searchTerm) || 
                server.type.toLowerCase().includes(searchTerm) ||
                server.description.toLowerCase().includes(searchTerm)
            );
            
            const filteredBest = data.bestServers.filter(server => 
                server.approved && (
                    server.name.toLowerCase().includes(searchTerm) || 
                    server.type.toLowerCase().includes(searchTerm) ||
                    server.description.toLowerCase().includes(searchTerm)
                )
            );
            
            const communityContainer = elements.communityServersList;
            communityContainer.innerHTML = '';
            
            if (filteredCommunity.length === 0) {
                communityContainer.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 2rem; color: var(--text-secondary);">
                        <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 1rem; color: var(--border-color);"></i>
                        <h3>هیچ سروری یافت نشد</h3>
                        <p>هیچ سروری با عبارت "${searchTerm}" پیدا نشد</p>
                    </div>
                `;
            } else {
                filteredCommunity.forEach(server => {
                    const serverElement = createServerElement(server, false);
                    communityContainer.appendChild(serverElement);
                });
                addCoinEffects();
            }
            
            if (elements.bestServersSection.classList.contains('active')) {
                const bestContainer = elements.bestServersList;
                bestContainer.innerHTML = '';
                
                if (filteredBest.length === 0) {
                    bestContainer.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: 2rem; color: var(--text-secondary);">
                            <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 1rem; color: var(--border-color);"></i>
                            <h3>هیچ سروری یافت نشد</h3>
                            <p>هیچ سروری با عبارت "${searchTerm}" پیدا نشد</p>
                        </div>
                    `;
                } else {
                    filteredBest.forEach(server => {
                        const serverElement = createServerElement(server, true);
                        bestContainer.appendChild(serverElement);
                    });
                    addCoinEffects();
                }
            }
        };

        // Load rules/articles
        const loadRules = () => {
            const container = elements.rulesContent;
            container.innerHTML = '';
            
            data.articles.forEach(article => {
                const author = data.users.find(u => u.id === article.authorId);
                
                const articleDiv = document.createElement('div');
                articleDiv.className = 'fade-in';
                articleDiv.innerHTML = `
                    <h3>${article.title}</h3>
                    <div style="margin: 1rem 0; color: var(--text-secondary); font-size: 0.9rem;">
                        <i class="far fa-calendar-alt"></i> ${article.createdAt} | 
                        <i class="far fa-eye"></i> ${article.views} بازدید
                    </div>
                    <div style="line-height: 1.8;">
                        ${article.content}
                    </div>
                    <div class="article-meta">
                        <img src="${author?.profilePic || 'https://via.placeholder.com/35/FFFFFF/D4AF37?text=A'}" alt="نویسنده" class="article-author-img">
                        <div>
                            <div>${author?.displayName || author?.username || 'نویسنده'}</div>
                            <div style="font-size: 0.8rem; color: var(--text-secondary);">نویسنده</div>
                        </div>
                    </div>
                `;
                
                container.appendChild(articleDiv);
            });
        };

        // Update stats
        const updateStats = () => {
            const totalServers = data.communityServers.length + data.bestServers.filter(s => s.approved).length;
            const onlineServers = [...data.communityServers, ...data.bestServers]
                .filter(s => s.status === 'online').length;
            const featuredServers = [...data.communityServers, ...data.bestServers]
                .filter(s => s.featured).length;
            const totalPlayers = [...data.communityServers, ...data.bestServers]
                .reduce((sum, server) => sum + (server.players || 0), 0);
            
            elements.totalServers.textContent = totalServers;
            elements.onlineServers.textContent = onlineServers;
            elements.featuredServers.textContent = featuredServers;
            elements.totalPlayers.textContent = totalPlayers;
            
            if (isAdmin && document.getElementById('site-stats-section')?.classList.contains('active')) {
                updateAdminStats();
            }
        };

        // Update admin stats
        const updateAdminStats = () => {
            elements.adminTotalUsers.textContent = data.users.length;
            elements.adminTotalServers.textContent = data.communityServers.length + data.bestServers.length;
            elements.adminTotalOrders.textContent = data.orders.length;
            
            const totalRevenue = data.orders.reduce((sum, order) => sum + order.amount, 0);
            elements.adminTotalRevenue.textContent = totalRevenue.toLocaleString();
            
            loadRecentActivities();
        };

        // Load recent activities
        const loadRecentActivities = () => {
            const container = document.getElementById('recent-activities');
            if (!container) return;
            
            container.innerHTML = '';
            
            const recentOrders = [...data.orders]
                .sort((a, b) => new Date(b.date) - new Date(a.date))
                .slice(0, 5);
            
            if (recentOrders.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">هنوز فعالیتی ثبت نشده است.</p>';
                return;
            }
            
            recentOrders.forEach(order => {
                const user = data.users.find(u => u.id === order.userId);
                
                const orderDiv = document.createElement('div');
                orderDiv.className = 'order-item';
                orderDiv.innerHTML = `
                    <div class="order-header">
                        <div>
                            <strong>${order.serverName}</strong>
                            <div style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 0.3rem;">
                                توسط: ${user?.displayName || user?.username}
                            </div>
                        </div>
                        <div class="order-status status-${order.status}">
                            ${order.status === 'pending' ? 'در حال بررسی' : 
                              order.status === 'approved' ? 'تایید شده' : 'رد شده'}
                        </div>
                    </div>
                    <div style="margin: 0.8rem 0; font-size: 0.9rem;">
                        ${order.serverType} - ${order.amount.toLocaleString()} تومان
                    </div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        ${order.date}
                    </div>
                `;
                
                container.appendChild(orderDiv);
            });
        };

        // Show admin panel
        const showAdminPanel = () => {
            hideSection(elements.homeSection);
            hideSection(elements.rulesSection);
            
            showSection(elements.adminPanel);
            elements.adminPanel.classList.add('active');
            
            loadTickets();
            loadAdminCommunityServers();
            loadAdminBestServers();
            loadAdminArticles();
            updateAdminStats();
            
            showAdminSection('add-server');
            
            document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
        };

        // Hide admin panel
        const hideAdminPanel = () => {
            hideSection(elements.adminPanel);
            elements.adminPanel.classList.remove('active');
            
            showSection(elements.homeSection);
            
            document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
            document.querySelector('nav a[data-section="home"]').classList.add('active');
        };

        // Show admin section
        const showAdminSection = (sectionId) => {
            document.querySelectorAll('.admin-section').forEach(section => {
                section.classList.remove('active');
            });
            
            const sectionElement = document.getElementById(`${sectionId}-section`);
            if (sectionElement) {
                sectionElement.classList.add('active');
            }
            
            if (sectionId === 'site-stats') {
                updateAdminStats();
            }
        };

        // Add server manually (admin)
        const addServerManually = () => {
            const name = document.getElementById('admin-server-name').value;
            const ip = document.getElementById('admin-server-ip').value;
            const type = document.getElementById('admin-server-type').value;
            const section = document.getElementById('admin-server-section').value;
            const featured = document.getElementById('admin-server-featured').value === 'featured';
            
            if (!name || !type) {
                alert('پر کردن فیلدهای ضروری الزامی است.');
                return;
            }
            
            const newServer = {
                id: section === 'community' ? data.nextIds.communityServers++ : data.nextIds.bestServers++,
                name,
                type,
                ip: ip || 'در حال تنظیم',
                description: `سرور ${type} اضافه شده توسط مدیر`,
                status: 'online',
                players: Math.floor(Math.random() * 50) + 10,
                maxPlayers: 100,
                featured,
                approved: true,
                rating: Math.floor(Math.random() * 3) + 3
            };
            
            if (section === 'community') {
                data.communityServers.push(newServer);
                loadCommunityServers();
                loadAdminCommunityServers();
            } else {
                newServer.registrationType = featured ? 'vip' : 'normal';
                data.bestServers.push(newServer);
                loadBestServers();
                loadAdminBestServers();
            }
            
            saveData(data);
            updateStats();
            
            document.getElementById('admin-server-form').reset();
            
            showNotification('سرور با موفقیت اضافه شد.', 'success');
        };

        // Load admin community servers with delete option
        const loadAdminCommunityServers = () => {
            const container = document.getElementById('admin-community-servers');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (data.communityServers.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 2rem; color: var(--text-secondary);">
                        <i class="fas fa-server" style="font-size: 3rem; margin-bottom: 1rem; color: var(--border-color);"></i>
                        <h3>هنوز سروری اضافه نشده است</h3>
                        <p>از بخش "افزودن دستی سرور" سرور جدید اضافه کنید</p>
                    </div>
                `;
                return;
            }
            
            data.communityServers.forEach(server => {
                const serverElement = createAdminServerElement(server, 'community');
                container.appendChild(serverElement);
            });
            
            addCoinEffects();
            
            document.querySelectorAll('.delete-server-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const serverId = parseInt(this.getAttribute('data-server-id'));
                    const section = this.getAttribute('data-section');
                    deleteServer(serverId, section);
                });
            });
        };

        // Load admin best servers with delete option
        const loadAdminBestServers = () => {
            const container = document.getElementById('admin-best-servers');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (data.bestServers.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 2rem; color: var(--text-secondary);">
                        <i class="fas fa-star" style="font-size: 3rem; margin-bottom: 1rem; color: var(--border-color);"></i>
                        <h3>هنوز سروری ثبت نشده است</h3>
                    </div>
                `;
                return;
            }
            
            data.bestServers.forEach(server => {
                const serverElement = createAdminServerElement(server, 'best');
                container.appendChild(serverElement);
            });
            
            addCoinEffects();
            
            document.querySelectorAll('.delete-server-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const serverId = parseInt(this.getAttribute('data-server-id'));
                    const section = this.getAttribute('data-section');
                    deleteServer(serverId, section);
                });
            });
        };

        // Create admin server element with delete button
        const createAdminServerElement = (server, section) => {
            const div = document.createElement('div');
            div.className = `server-card ${server.featured ? 'featured' : ''}`;
            
            let badge = '';
            if (section === 'best' && (server.registrationType === 'vip' || server.featured)) {
                badge = `<div class="server-badge"><i class="fas fa-check-circle"></i> ویژه</div>`;
            }
            
            const rating = server.rating || Math.floor(Math.random() * 3) + 3;
            const stars = Array(5).fill(0).map((_, i) => 
                i < rating ? '<i class="fas fa-star star"></i>' : '<i class="far fa-star star empty"></i>'
            ).join('');
            
            div.innerHTML = `
                ${badge}
                <div class="server-header">
                    <div class="server-name">${server.name}</div>
                    <div class="server-type">${server.type}</div>
                </div>
                <div class="server-ip">${server.ip}</div>
                <div class="server-info">${server.description}</div>
                <div class="server-rating">
                    ${stars}
                    <span style="margin-right: 0.5rem; color: var(--text-secondary);">(${rating}.0)</span>
                </div>
                <div class="server-status">
                    <div class="status-dot ${server.status === 'online' ? '' : 'offline'}"></div>
                    <span>${server.status === 'online' ? `${server.players}/${server.maxPlayers} بازیکن` : 'آفلاین'}</span>
                </div>
                <div class="server-actions">
                    <button class="btn-small btn-reject delete-server-btn" data-server-id="${server.id}" data-section="${section}">
                        <i class="fas fa-trash"></i> حذف سرور
                    </button>
                </div>
            `;
            
            return div;
        };

        // Delete server
        const deleteServer = (serverId, section) => {
            if (!confirm('آیا از حذف این سرور اطمینان دارید؟ این عمل قابل بازگشت نیست.')) {
                return;
            }
            
            if (section === 'community') {
                const index = data.communityServers.findIndex(s => s.id === serverId);
                if (index !== -1) {
                    data.communityServers.splice(index, 1);
                }
            } else if (section === 'best') {
                const index = data.bestServers.findIndex(s => s.id === serverId);
                if (index !== -1) {
                    data.bestServers.splice(index, 1);
                }
            }
            
            saveData(data);
            
            loadCommunityServers();
            loadBestServers();
            loadAdminCommunityServers();
            loadAdminBestServers();
            updateStats();
            
            showNotification('سرور با موفقیت حذف شد.', 'success');
        };

        // Load admin articles
        const loadAdminArticles = () => {
            const container = document.getElementById('articles-list');
            if (!container) return;
            
            container.innerHTML = '';
            
            data.articles.forEach(article => {
                const author = data.users.find(u => u.id === article.authorId);
                
                const articleDiv = document.createElement('div');
                articleDiv.className = 'ticket-item';
                articleDiv.innerHTML = `
                    <h4>${article.title}</h4>
                    <div style="margin: 0.5rem 0; color: var(--text-secondary); font-size: 0.85rem;">
                        <i class="far fa-calendar-alt"></i> ${article.createdAt} | 
                        <i class="far fa-eye"></i> ${article.views} بازدید |
                        نویسنده: ${author?.displayName || author?.username}
                    </div>
                    <div style="margin-top: 1rem; display: flex; gap: 0.5rem;">
                        <button class="btn-small btn-info edit-article-btn" data-article-id="${article.id}">
                            <i class="fas fa-edit"></i> ویرایش
                        </button>
                        <button class="btn-small btn-reject delete-article-btn" data-article-id="${article.id}">
                            <i class="fas fa-trash"></i> حذف
                        </button>
                    </div>
                `;
                
                container.appendChild(articleDiv);
            });
            
            document.querySelectorAll('.delete-article-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const articleId = parseInt(this.getAttribute('data-article-id'));
                    deleteArticle(articleId);
                });
            });
        };

        // Add article
        const addArticle = () => {
            const title = document.getElementById('article-title').value;
            const content = document.getElementById('article-content').value;
            
            if (!title || !content) {
                alert('پر کردن همه فیلدها الزامی است.');
                return;
            }
            
            const newArticle = {
                id: data.nextIds.articles++,
                title,
                content,
                authorId: currentUser.id,
                authorName: currentUser.displayName || currentUser.username,
                createdAt: new Date().toISOString().split('T')[0],
                views: 0
            };
            
            data.articles.push(newArticle);
            saveData(data);
            
            document.getElementById('article-form').reset();
            
            loadAdminArticles();
            loadRules();
            
            showNotification('مقاله با موفقیت منتشر شد.', 'success');
        };

        // Delete article
        const deleteArticle = (articleId) => {
            if (!confirm('آیا از حذف این مقاله اطمینان دارید؟ این عمل قابل بازگشت نیست.')) {
                return;
            }
            
            const index = data.articles.findIndex(a => a.id === articleId);
            if (index !== -1) {
                data.articles.splice(index, 1);
                saveData(data);
                
                loadAdminArticles();
                loadRules();
                
                showNotification('مقاله با موفقیت حذف شد.', 'success');
            }
        };

        // Add ad
        const addAd = () => {
            const title = document.getElementById('ad-title').value;
            const content = document.getElementById('ad-content').value;
            const position = document.getElementById('ad-position').value;
            
            if (!title || !content) {
                alert('پر کردن همه فیلدها الزامی است.');
                return;
            }
            
            const newAd = {
                id: data.nextIds.ads++,
                title,
                content,
                position,
                active: true
            };
            
            data.ads.push(newAd);
            saveData(data);
            
            document.getElementById('ad-form').reset();
            
            showNotification('تبلیغ با موفقیت اضافه شد.', 'success');
        };

        // Show my servers
        const showMyServers = () => {
            if (!currentUser) return;
            
            const myServers = data.bestServers.filter(server => server.userId === currentUser.id);
            
            const modalContent = `
                <h3>سرورهای من</h3>
                <div style="margin-top: 1rem;">
                    ${myServers.length === 0 ? 
                        '<p style="text-align: center; color: var(--text-secondary); padding: 2rem;">شما هنوز سروری ثبت نکرده‌اید.</p>' :
                        myServers.map(server => `
                            <div class="server-card" style="margin-bottom: 1rem;">
                                <div class="server-header">
                                    <div class="server-name">${server.name}</div>
                                    <div class="server-type">${server.type}</div>
                                </div>
                                <div class="server-ip">${server.ip}</div>
                                <div class="server-status">
                                    <div class="status-dot ${server.status === 'online' ? '' : 'offline'}"></div>
                                    <span>${server.status === 'online' ? 'آنلاین' : 'آفلاین'}</span>
                                    <span style="margin-right: 1rem;">وضعیت: ${server.approved ? 'تایید شده' : 'در انتظار تایید'}</span>
                                </div>
                            </div>
                        `).join('')
                    }
                </div>
            `;
            
            const modal = document.createElement('div');
            modal.className = 'payment-modal';
            modal.innerHTML = `
                <button class="close-modal" id="close-my-servers-modal">×</button>
                ${modalContent}
            `;
            
            elements.overlay.innerHTML = '';
            elements.overlay.appendChild(modal);
            elements.overlay.classList.add('active');
            
            document.getElementById('close-my-servers-modal').addEventListener('click', () => {
                elements.overlay.classList.remove('active');
            });
        };

        // Show my orders
        const showMyOrders = () => {
            if (!currentUser) return;
            
            const myOrders = data.orders.filter(order => order.userId === currentUser.id);
            
            const modalContent = `
                <h3>سفارشات من</h3>
                <div style="margin-top: 1rem;">
                    ${myOrders.length === 0 ? 
                        '<p style="text-align: center; color: var(--text-secondary); padding: 2rem;">شما هنوز سفارشی ثبت نکرده‌اید.</p>' :
                        myOrders.map(order => `
                            <div class="order-item" style="margin-bottom: 1rem;">
                                <div class="order-header">
                                    <div>
                                        <strong>${order.serverName}</strong>
                                        <div style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 0.3rem;">
                                            ${order.serverType}
                                        </div>
                                    </div>
                                    <div class="order-status status-${order.status}">
                                        ${order.status === 'pending' ? 'در حال بررسی' : 
                                          order.status === 'approved' ? 'تایید شده' : 'رد شده'}
                                    </div>
                                </div>
                                <div style="margin: 0.8rem 0; font-size: 0.9rem;">
                                    مبلغ: ${order.amount.toLocaleString()} تومان
                                </div>
                                <div style="font-size: 0.85rem; color: var(--text-secondary);">
                                    تاریخ: ${order.date}
                                </div>
                            </div>
                        `).join('')
                    }
                </div>
            `;
            
            const modal = document.createElement('div');
            modal.className = 'payment-modal';
            modal.innerHTML = `
                <button class="close-modal" id="close-my-orders-modal">×</button>
                ${modalContent}
            `;
            
            elements.overlay.innerHTML = '';
            elements.overlay.appendChild(modal);
            elements.overlay.classList.add('active');
            
            document.getElementById('close-my-orders-modal').addEventListener('click', () => {
                elements.overlay.classList.remove('active');
            });
        };

        // Load tickets for admin
        const loadTickets = () => {
            const container = document.getElementById('ticket-list');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (data.tickets.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">هنوز تیکتی ایجاد نشده است.</p>';
                return;
            }
            
            data.tickets.forEach(ticket => {
                const user = data.users.find(u => u.id === ticket.userId);
                const order = data.orders.find(o => o.id === ticket.orderId);
                
                const ticketElement = document.createElement('div');
                ticketElement.className = 'ticket-item';
                ticketElement.innerHTML = `
                    <div class="ticket-header">
                        <div>
                            <strong>${ticket.subject}</strong>
                            <div style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 0.3rem;">
                                توسط: ${user?.displayName || user?.username}
                            </div>
                        </div>
                        <div class="ticket-status status-${ticket.status}">
                            ${ticket.status === 'pending' ? 'در حال بررسی' : 
                              ticket.status === 'approved' ? 'تایید شده' : 'رد شده'}
                        </div>
                    </div>
                    <div style="margin: 1rem 0; font-size: 0.9rem;">
                        ${ticket.messages[0]?.message.substring(0, 120)}...
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">
                            ${ticket.createdAt}
                        </div>
                        <div>
                            <button class="btn-small btn-chat view-ticket-btn" data-ticket-id="${ticket.id}">
                                <i class="fas fa-comment-alt"></i> مشاهده
                            </button>
                        </div>
                    </div>
                `;
                
                container.appendChild(ticketElement);
            });
            
            document.querySelectorAll('.view-ticket-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const ticketId = parseInt(btn.getAttribute('data-ticket-id'));
                    showTicketModal(ticketId);
                });
            });
        };

        // Show ticket modal
        const showTicketModal = (ticketId) => {
            const ticket = data.tickets.find(t => t.id === ticketId);
            if (!ticket) return;
            
            currentTicket = ticket;
            const user = data.users.find(u => u.id === ticket.userId);
            
            document.getElementById('ticket-title').textContent = ticket.subject;
            document.getElementById('ticket-modal-id').textContent = `#${ticket.id}`;
            document.getElementById('ticket-modal-status').textContent = 
                ticket.status === 'pending' ? 'در حال بررسی' : 
                ticket.status === 'approved' ? 'تایید شده' : 'رد شده';
            document.getElementById('ticket-modal-status').className = `ticket-status status-${ticket.status}`;
            
            const chatContainer = document.getElementById('ticket-chat');
            chatContainer.innerHTML = '';
            
            ticket.messages.forEach(message => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${message.sender === 'admin' ? 'admin-message' : 'user-message'}`;
                messageDiv.style.cssText = `
                    background-color: ${message.sender === 'admin' ? 'rgba(212, 175, 55, 0.15)' : 'var(--dark-bg)'};
                    padding: 0.8rem;
                    border-radius: var(--border-radius);
                    margin-bottom: 0.8rem;
                    border-right: 3px solid ${message.sender === 'admin' ? 'var(--secondary-color)' : 'var(--text-secondary)'};
                `;
                
                messageDiv.innerHTML = `
                    <div style="font-weight: 500; margin-bottom: 0.3rem; font-size: 0.9rem;">
                        ${message.sender === 'admin' ? 'مدیر' : (user?.displayName || user?.username)}
                    </div>
                    <div style="font-size: 0.9rem;">${message.message}</div>
                    <div style="text-align: left; font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.3rem;">
                        ${message.timestamp}
                    </div>
                `;
                
                chatContainer.appendChild(messageDiv);
            });
            
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            const actionsContainer = document.getElementById('ticket-actions');
            actionsContainer.innerHTML = '';
            
            if (isAdmin && ticket.status === 'pending') {
                actionsContainer.innerHTML = `
                    <button class="btn-small btn-approve" id="approve-ticket-btn">
                        <i class="fas fa-check"></i> تایید سرور
                    </button>
                    <button class="btn-small btn-reject" id="reject-ticket-btn">
                        <i class="fas fa-times"></i> رد سرور
                    </button>
                `;
                
                document.getElementById('approve-ticket-btn').addEventListener('click', () => approveTicket(ticketId));
                document.getElementById('reject-ticket-btn').addEventListener('click', () => rejectTicket(ticketId));
            }
            
            document.getElementById('send-ticket-message').addEventListener('click', sendTicketMessage);
            document.getElementById('ticket-message').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendTicketMessage();
                }
            });
            
            showModal('ticket');
        };

        // Send ticket message
        const sendTicketMessage = () => {
            if (!currentTicket) return;
            
            const messageInput = document.getElementById('ticket-message');
            const message = messageInput.value.trim();
            
            if (!message) return;
            
            const ticketIndex = data.tickets.findIndex(t => t.id === currentTicket.id);
            if (ticketIndex === -1) return;
            
            const newMessage = {
                id: data.tickets[ticketIndex].messages.length + 1,
                sender: currentUser.role === 'admin' ? 'admin' : 'user',
                message,
                timestamp: new Date().toISOString().replace('T', ' ').substring(0, 16)
            };
            
            data.tickets[ticketIndex].messages.push(newMessage);
            saveData(data);
            
            currentTicket = data.tickets[ticketIndex];
            messageInput.value = '';
            
            showTicketModal(currentTicket.id);
        };

        // Approve ticket
        const approveTicket = (ticketId) => {
            const ticketIndex = data.tickets.findIndex(t => t.id === ticketId);
            if (ticketIndex === -1) return;
            
            data.tickets[ticketIndex].status = 'approved';
            
            const orderId = data.tickets[ticketIndex].orderId;
            const orderIndex = data.orders.findIndex(o => o.id === orderId);
            
            if (orderIndex !== -1) {
                data.orders[orderIndex].status = 'approved';
                
                const order = data.orders[orderIndex];
                const newServer = {
                    id: data.nextIds.bestServers++,
                    name: order.serverName,
                    type: order.serverType,
                    ip: order.serverIp,
                    description: `سرور ${order.serverType} ثبت شده توسط ${currentUser.displayName || currentUser.username}`,
                    status: 'online',
                    players: Math.floor(Math.random() * 50) + 10,
                    maxPlayers: 100,
                    featured: order.registrationType === 'vip',
                    userId: order.userId,
                    registrationType: order.registrationType,
                    approved: true,
                    rating: Math.floor(Math.random() * 3) + 3
                };
                
                data.bestServers.push(newServer);
                
                data.tickets[ticketIndex].messages.push({
                    id: data.tickets[ticketIndex].messages.length + 1,
                    sender: 'admin',
                    message: `سرور شما تایید و در لیست بهترین سرورهای سمپ قرار گرفت.`,
                    timestamp: new Date().toISOString().replace('T', ' ').substring(0, 16)
                });
            }
            
            saveData(data);
            
            updateStats();
            
            loadBestServers();
            loadAdminBestServers();
            
            showNotification('تیکت تایید و سرور به لیست اضافه شد.', 'success');
            
            hideModal('ticket');
        };

        // Reject ticket
        const rejectTicket = (ticketId) => {
            const ticketIndex = data.tickets.findIndex(t => t.id === ticketId);
            if (ticketIndex === -1) return;
            
            data.tickets[ticketIndex].status = 'rejected';
            
            const orderId = data.tickets[ticketIndex].orderId;
            const orderIndex = data.orders.findIndex(o => o.id === orderId);
            
            if (orderIndex !== -1) {
                data.orders[orderIndex].status = 'rejected';
                
                data.tickets[ticketIndex].messages.push({
                    id: data.tickets[ticketIndex].messages.length + 1,
                    sender: 'admin',
                    message: `متاسفانه سرور شما تایید نشد. لطفا با پشتیبانی تماس بگیرید.`,
                    timestamp: new Date().toISOString().replace('T', ' ').substring(0, 16)
                });
            }
            
            saveData(data);
            
            showNotification('تیکت رد شد.', 'info');
            
            hideModal('ticket');
        };

        // Show modal
        const showModal = (modalType) => {
            elements.overlay.classList.add('active');
            
            elements.loginModal.style.display = 'none';
            elements.registerModal.style.display = 'none';
            elements.paymentModal.style.display = 'none';
            elements.profileModal.style.display = 'none';
            elements.ticketModal.style.display = 'none';
            
            if (modalType === 'login') {
                elements.loginModal.style.display = 'block';
                document.getElementById('login-username').focus();
            } else if (modalType === 'register') {
                elements.registerModal.style.display = 'block';
                document.getElementById('register-username').focus();
            } else if (modalType === 'payment') {
                elements.paymentModal.style.display = 'block';
            } else if (modalType === 'profile') {
                elements.profileModal.style.display = 'block';
            } else if (modalType === 'ticket') {
                elements.ticketModal.style.display = 'block';
                document.getElementById('ticket-message').focus();
            }
        };

        // Hide modal
        const hideModal = (modalType) => {
            elements.overlay.classList.remove('active');
        };

        // Show section
        const showSection = (section) => {
            section.style.display = 'block';
        };

        // Hide section
        const hideSection = (section) => {
            section.style.display = 'none';
        };

        // Setup scroll animations
        const setupScrollAnimations = () => {
            const fadeElements = document.querySelectorAll('.fade-in');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1 });
            
            fadeElements.forEach(el => observer.observe(el));
        };

        // Show notification
        const showNotification = (message, type) => {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 20px;
                background-color: ${type === 'success' ? 'var(--success-color)' : type === 'error' ? 'var(--danger-color)' : 'var(--secondary-color)'};
                color: white;
                padding: 0.8rem 1.2rem;
                border-radius: var(--border-radius);
                box-shadow: var(--box-shadow);
                z-index: 9999;
                animation: slideIn 0.3s ease, fadeOut 0.3s ease 2.7s;
                max-width: 300px;
            `;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                    <div>${message}</div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 3000);
            
            if (!document.querySelector('#notification-styles')) {
                const style = document.createElement('style');
                style.id = 'notification-styles';
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(-100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes fadeOut {
                        from { opacity: 1; }
                        to { opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        };

        // Initialize the application
        init();
    </script>
</body>
</html>